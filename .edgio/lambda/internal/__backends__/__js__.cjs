/*! For license information please see prod.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(global,(()=>(()=>{"use strict";var __webpack_modules__={3778:e=>{e.exports=function(){return/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?/}},5536:(e,t,n)=>{var o=n(3778);e.exports=function(e){if("string"!=typeof e)throw new TypeError("expected a string");var t=o().exec(e);if(t)return t[0]}},9917:(e,t,n)=>{const o=n(3);e.exports=class{constructor(){this.MODULE_ENTRY=new o,this.PATH=new o,this.REAL_FILE_PATH=new o,this.REAL_DIRECTORY_PATH=new o,Object.freeze(this)}}},3:e=>{e.exports=class{constructor(){this._store=function(){const e=Object.create(null);return e._cache=1,delete e._cache,e}()}set(e,t){return this._store[e]=t}get(e){return this._store[e]}has(e){return e in this._store}delete(e){delete this._store[e]}get size(){return Object.keys(this._store).length}}},9477:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=o(n(6928)),i=o(n(7638)),s=o(n(6047)),_=["MODULE_NOT_FOUND","UNDECLARED_DEPENDENCY","MISSING_PEER_DEPENDENCY","MISSING_DEPENDENCY"],a=n(9917),u=n(3),c=i.default._getRealFilePath,l=i.default._getRealDirectoryPath,d=i.default._findUpPackagePath;let E,f=new a,p=new u;try{E=n(5301)}catch(e){}function g(e,t){let n;n=null==t||!0===t?p:!1===t?new u:t;let o=r.default.resolve(e);return d(n,o)}function I(e,t,n){let o;o=null==n||!0===n?f:!1===n?new a:n,t.charAt(t.length-1)!==r.default.sep&&(t=`${t}${r.default.sep}`);const u=e+"\0"+t;let c;if(o.PATH.has(u))c=o.PATH.get(u);else{try{c=E?E.resolveToUnqualified(e+"/package.json",t):(0,i.default)(o,e,t)}catch(e){(0,s.default)(e,..._),c=null}o.PATH.set(u,c)}return c}I._resetCache=function(){f=new a,p=new u},function(e){e._FIND_UP_CACHE=p,e.findUpPackagePath=g}(I||(I={})),Object.defineProperty(I,"_CACHE",{get:function(){return f}}),Object.defineProperty(I,"_FIND_UP_CACHE",{get:function(){return p}}),I.getRealFilePath=function(e){return c(f.REAL_FILE_PATH,e)},I.getRealDirectoryPath=function(e){return l(f.REAL_DIRECTORY_PATH,e)},e.exports=I},7638:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=n(9896),i=n(6928),s=n(5536),_=o(n(6047)),a=/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/,u=n(6888)(process);function c(e,t){if(e.has(t))return e.get(t);let n=null;try{const e=r.statSync(t);(e.isFile()||e.isFIFO())&&(n=u?t:r.realpathSync(t))}catch(e){(0,_.default)(e,"ENOENT")}return e.set(t,n),n}function l(e,t){if(e.has(t))return e.get(t);let n=null;try{r.statSync(t).isDirectory()&&(n=u?t:r.realpathSync(t))}catch(e){(0,_.default)(e,"ENOENT","ENOTDIR")}return e.set(t,n),n}function d(e,t,n){const o=s(n);let r=n;for(;r!==o;){let n="node_modules"===i.basename(r).toLowerCase(),o=c(e,i.join(r,n?"":"node_modules",t));if(o)return o;n&&(r=i.dirname(r)),r=i.dirname(r)}return null}function E(e,t,n){if("string"!=typeof t||0===t.length)throw new TypeError("resolvePackagePath: 'name' must be a non-zero-length string.");let o=n||__dirname,r=i.resolve(o);for(;null===l(e.REAL_DIRECTORY_PATH,r);)r=i.dirname(r);if(!r){let e=new TypeError("resolvePackagePath: 'dir' or one of the parent directories in its path must refer to a valid directory.");throw e.code="MODULE_NOT_FOUND",e}if(a.test(t)){let n=i.resolve(r,t);return c(e.REAL_FILE_PATH,i.join(n,"package.json"))}return d(e.REAL_FILE_PATH,i.join(t,"package.json"),r)}E._findPackagePath=d,E._findUpPackagePath=function(e,t){let n,o,s=t,_=null;do{if(e.has(s)){_=e.get(s);break}if(o=i.join(s,"package.json"),r.existsSync(o)){_=o;break}n=s,s=i.dirname(s)}while(s!==n);return e.set(t,_),_},E._getRealFilePath=c,E._getRealDirectoryPath=l,e.exports=E},6047:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,...t){if(null!==e&&"object"==typeof e){const n=e.code;for(const e of t)if(n===e)return}throw e}},6888:e=>{e.exports=function(e){return!!e.env.NODE_PRESERVE_SYMLINKS||function(e,t){for(let t=0;t<e.length;t++)if("--preserve-symlinks"===e[t])return!0;return!1}(e.execArgv)}},7431:e=>{e.exports=e=>{const t=/^\\\\\?\\/.test(e),n=/[^\u0000-\u0080]+/.test(e);return t||n?e:e.replace(/\\/g,"/")}},5510:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(6928),i=o(n(7990)),s=n(9896),_=n(1662);t.default=async function(e){var t;const n=(0,_.getConfig)(),o=i.default.get();if(!o.prodCommand)return;const a="function"==typeof o.prodCommand?await o.prodCommand(n,e):o.prodCommand;if(process.env.PORT=e.toString(),!a.serverPath)return;const u=(0,r.resolve)(a.serverPath);if((0,s.existsSync)(u)){const e=await import(`file://${u}`);return a.run&&await a.run((null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.default)||(null==e?void 0:e.default)||e),e}}},7990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(1662),r=n(7472),i=n(6928);t.default=class{static get(e){var t;const n=null!=e?e:null===(t=(0,o.getConfig)().connector)||void 0===t?void 0:t.split("/")[1];if("connectors"===n)throw new Error("The @edgio/connectors package is not a valid connector. Please specify a connector name such as '@edgio/express', '@edgio/astro', etc...");if(!n)throw new Error(`Connector '${n}' doesn't exist.`);return(0,r.nonWebpackRequire)((0,i.join)("@edgio/connectors/frameworks",n)).default}}},1662:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigFromFile=t.getConfig=void 0;const r=n(4944),i=n(7472),s=o(n(9548));let _;function a(e,t=!1){if(!_||t){t&&delete n.c[e];try{_=(0,i.nonWebpackRequire)(e)}catch(e){throw"ERR_REQUIRE_ESM"===e.code&&(s.default.error("Error: The 'edgio.config.js' file cannot be loaded because it uses CommonJS syntax and this project is set to type 'module'. Please rename it to 'edgio.config.cjs'."),process.exit(1)),e}const o=process.env.EDGIO_ENVIRONMENT_NAME;o&&_.environments&&_.environments[o]&&(s.default.info(`using config overrides for ${o}`),Object.assign(_,_.environments[o])),_.nodejsConnector&&_.customConnector&&(_.nodejsConnector=_.customConnector)}return _}t.getConfig=function(e=!1){return a((0,r.getConfigPath)(),e)},t.getConfigFromFile=a},4944:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getJsInternalPath=t.getConfigPath=t.getRoutesPath=t.getSrcConfigPath=t.getSrcRouterPath=t.getStaticAssetManifestPath=t.getEntryPoint=t.pathForBackend=t.STATIC_ASSET_EXPIRATION_FILE_NAME=t.STATIC_ASSET_MANIFEST_FILE_NAME=t.CONFIG_FILE_NAME=t.ROUTES_FILE_NAME=t.TMP_DIR=t.SOURCES_DIR=t.PERMANENT_ASSETS_DIR=t.ASSETS_DIR=t.EDGE_FUNCTIONS_QUICKJS_BYTECODE_PATH=t.EDGE_FUNCTIONS_QUICKJS_BYTECODE_FILENAME=t.EDGE_FUNCTIONS_INDEX_PATH=t.EDGE_FUNCTIONS_BUNDLE_PATH=t.EDGE_FUNCTIONS_BUNDLE_FILENAME=t.EDGE_FUNCTION_SOURCES_FILENAME=t.EDGE_FUNCTIONS_INDEX_FILENAME=t.JS_APP_DIR=t.JS_APP_DIR_NAME=t.JS_INTERNAL_DIR=t.JS_INTERNAL_DIR_NAME=t.LAMBDA_DIR=t.EDGIO_DIR=void 0;const r=n(9896),i=n(6928),s=o(n(4019)),_=n(1962);function a(e){const t=process.cwd(),n=((null==e?void 0:e.routes)?[(0,i.join)(process.cwd(),e.routes)]:[(0,i.join)(t,"routes.js"),(0,i.join)(t,"routes.ts"),(0,i.join)(t,"routes.cjs")]).find(r.existsSync);if(null==n){const t=(null==e?void 0:e.routes)||"routes.js, routes.ts, or routes.cjs";throw new Error(`Edgio routes file not found. Please create ${t} in the root directory of your project.`)}return n}function u(){const e=process.cwd(),t=[(0,i.join)(e,"edgio.config.js"),(0,i.join)(e,"edgio.config.ts"),(0,i.join)(e,"edgio.config.cjs")].find(r.existsSync);if(null==t)throw new Error("Edgio config file not found. Please create edgio.config.js or edgio.config.cjs in the root directory of your project.");return t}function c(){var e,n;return null!==(n=null===(e=_.EdgioRuntimeGlobal.runtimeOptions)||void 0===e?void 0:e.fs.edgio.lambda.internal.value)&&void 0!==n?n:(0,i.join)(process.cwd(),t.JS_INTERNAL_DIR)}t.EDGIO_DIR=".edgio",t.LAMBDA_DIR=(0,i.join)(t.EDGIO_DIR,"lambda"),t.JS_INTERNAL_DIR_NAME="internal",t.JS_INTERNAL_DIR=(0,i.join)(t.LAMBDA_DIR,t.JS_INTERNAL_DIR_NAME),t.JS_APP_DIR_NAME="app",t.JS_APP_DIR=(0,i.join)(t.LAMBDA_DIR,t.JS_APP_DIR_NAME),t.EDGE_FUNCTIONS_INDEX_FILENAME="__edge-functions-index__.js",t.EDGE_FUNCTION_SOURCES_FILENAME="__edge-function-sources__.json",t.EDGE_FUNCTIONS_BUNDLE_FILENAME="edge-function.js",t.EDGE_FUNCTIONS_BUNDLE_PATH=(0,i.join)(t.JS_INTERNAL_DIR,t.EDGE_FUNCTIONS_BUNDLE_FILENAME),t.EDGE_FUNCTIONS_INDEX_PATH=(0,i.join)(t.JS_INTERNAL_DIR,t.EDGE_FUNCTIONS_INDEX_FILENAME),t.EDGE_FUNCTIONS_QUICKJS_BYTECODE_FILENAME="__edge-functions__.qbc",t.EDGE_FUNCTIONS_QUICKJS_BYTECODE_PATH=(0,i.join)(t.JS_INTERNAL_DIR,t.EDGE_FUNCTIONS_QUICKJS_BYTECODE_FILENAME),t.ASSETS_DIR=(0,i.join)(t.EDGIO_DIR,"s3"),t.PERMANENT_ASSETS_DIR=(0,i.join)(t.EDGIO_DIR,"s3-permanent"),t.SOURCES_DIR=(0,i.join)(t.EDGIO_DIR,"src"),t.TMP_DIR=(0,i.join)(t.EDGIO_DIR,"tmp"),t.ROUTES_FILE_NAME="routes.cjs",t.CONFIG_FILE_NAME="edgio.config.cjs",t.STATIC_ASSET_MANIFEST_FILE_NAME="static-asset-manifest.json",t.STATIC_ASSET_EXPIRATION_FILE_NAME="static-asset-expiration.json",t.pathForBackend=function(e){return(0,i.join)("__backends__",`${e}.cjs`)},t.getEntryPoint=(e,t,n="@edgio/core")=>{if(null==n?void 0:n.startsWith(".")){const o=[(0,i.join)(t,n,`${e}.cjs`),(0,i.join)(t,n,`${e}.mjs`),(0,i.join)(t,n,`${e}.js`)].find((e=>(0,r.existsSync)(e)))||"";return o&&(0,r.existsSync)(o)?o:void 0}return[(0,s.default)(n,`${e}.js`),(0,s.default)("@edgio/connectors",`${e}.js`),(0,s.default)("@edgio/core",`${e}.js`)].find((e=>e&&(0,r.existsSync)(e)))||""},t.getStaticAssetManifestPath=function(){var e,n;if(null===(e=_.EdgioRuntimeGlobal.runtimeOptions)||void 0===e?void 0:e.fs.edgio.lambda.internal.staticAssetManifest)return null===(n=_.EdgioRuntimeGlobal.runtimeOptions)||void 0===n?void 0:n.fs.edgio.lambda.internal.staticAssetManifest.value;const o=(0,i.join)(c(),t.STATIC_ASSET_MANIFEST_FILE_NAME);if(!(0,r.existsSync)(o))throw new Error(`The '${o}' file was not found. Please try to re-run 'edgio build'.`);return o},t.getSrcRouterPath=a,t.getSrcConfigPath=u,t.getRoutesPath=function(){var e,t;return null!==(t=null===(e=_.EdgioRuntimeGlobal.runtimeOptions)||void 0===e?void 0:e.fs.edgio.lambda.internal.routes)&&void 0!==t?t:a()},t.getConfigPath=function(){var e,t;return null!==(t=null===(e=_.EdgioRuntimeGlobal.runtimeOptions)||void 0===e?void 0:e.fs.edgio.lambda.internal.config.value)&&void 0!==t?t:u()},t.getJsInternalPath=c},4019:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(9477)),i=n(6928);t.default=function(e,...t){let n=(0,r.default)(e,__dirname)||(0,r.default)(e,process.cwd());if(!n)return;const o=(0,i.dirname)(n);return(0,i.join)(o,...t)}},1962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EdgioRuntimeGlobal=void 0,String.prototype.writeToStream=function(e){e.sendResponse(this.toString())},t.EdgioRuntimeGlobal=class{static get runtimeOptions(){return global.EDGIO_RUNTIME_OPTIONS}static set runtimeOptions(e){global.EDGIO_RUNTIME_OPTIONS=e}static get isCacheEnabled(){var e;return null!==(e=global.isCacheEnabled)&&void 0!==e&&e}static set isCacheEnabled(e){global.isCacheEnabled=e}static get devOptions(){return global.devOptions}static set devOptions(e){global.devOptions=e}}},9548:(e,t)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"}(o||(o={}));const r=null===(n=process.env.LOG_LEVEL)||void 0===n?void 0:n.toUpperCase(),i=r?o[r]:o.INFO,s={trace(...e){s.log(o.TRACE,...e)},debug(...e){s.log(o.DEBUG,...e)},info(...e){s.log(o.INFO,...e)},warn(...e){s.log(o.WARN,...e)},error(...e){s.log(o.ERROR,...e)},log(e,...t){1===t.length&&"function"==typeof t[0]&&(t=[t[0]()]),null!=i&&i<=e&&console.log(`${o[e].padEnd(5," ")}`,...t)}};t.default=s},7472:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.nonWebpackRequire=void 0;var r=n(5681);Object.defineProperty(t,"nonWebpackRequire",{enumerable:!0,get:function(){return o(r).default}})},5681:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const slash_1=__importDefault(__webpack_require__(7431));function nonWebpackRequire(modulePath,{ignoreErrors=!1}={}){try{return eval("require")((0,slash_1.default)(modulePath))}catch(e){if(ignoreErrors)return;throw e}}exports.default=nonWebpackRequire},9896:e=>{e.exports=require("fs")},6928:e=>{e.exports=require("path")},5301:e=>{e.exports=require("pnpapi")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.c=__webpack_module_cache__;var __webpack_exports__=__webpack_require__(5510);return __webpack_exports__})()));